<div class="sheet-container">
    <div class ="sheet-item-header">
        <input type='hidden' class='controller_d12_1' name='attr_controller_d12_1' value='one'>
        <input type='hidden' class='controller_d12_2' name='attr_controller_d12_2' value='one'>
        <input type='hidden' class='controller_d10_1' name='attr_controller_d10_1' value='one'>
        <input type='hidden' class='controller_d10_2' name='attr_controller_d10_2' value='one'>
        <input type='hidden' class='controller_d8_1' name='attr_controller_d8_1' value='one'>
        <input type='hidden' class='controller_d8_2' name='attr_controller_d8_2' value='one'>
        <input type='hidden' class='controller_d8_3' name='attr_controller_d8_3' value='one'>
        <input type='hidden' class='controller_d6_1' name='attr_controller_d6_1' value='one'>
        <input type='hidden' class='controller_d6_2' name='attr_controller_d6_2' value='one'>
        <input type='hidden' class='controller_d4_1' name='attr_controller_d4_1' value='one'>
        <input type='hidden' class='controller_d4_2' name='attr_controller_d4_2' value='one'>
        <input type='hidden' class='controller_d4_3' name='attr_controller_d4_3' value='one'>
        <!--<div class='contain'>
            <h4>Controllers</h4>
            <label class='control1-label'><input type='radio' name='attr_controller_d12_1' value='one' checked><span>d12_1:hide</span></label>
            <label class='control2-label'><input type='radio' name='attr_controller_d12_1' value='two'><span>d12_1:show</span></label>
            <label class='control1-label'><input type='radio' name='attr_controller_d12_2' value='one' checked><span>d12_2:hide</span></label>
            <label class='control2-label'><input type='radio' name='attr_controller_d12_2' value='two'><span>d12_2:show</span></label>
            <label class='control1-label'><input type='radio' name='attr_controller_d10_1' value='one' checked><span>d10_1:hide</span></label>
            <label class='control2-label'><input type='radio' name='attr_controller_d10_1' value='two'><span>d10_1:show</span></label>
            <label class='control1-label'><input type='radio' name='attr_controller_d10_2' value='one' checked><span>d10_2:hide</span></label>
            <label class='control2-label'><input type='radio' name='attr_controller_d10_2' value='two'><span>d10_2:show</span></label>
			<label class='control1-label'><input type='radio' name='attr_controller_d8_1' value='one' checked><span>d8_1:hide</span></label>
            <label class='control2-label'><input type='radio' name='attr_controller_d8_1' value='two'><span>d8_1:show</span></label>
            <label class='control1-label'><input type='radio' name='attr_controller_d8_2' value='one' checked><span>d8_2:hide</span></label>
            <label class='control2-label'><input type='radio' name='attr_controller_d8_2' value='two'><span>d8_2:show</span></label>
			<label class='control1-label'><input type='radio' name='attr_controller_d8_3' value='one' checked><span>d8_3:hide</span></label>
            <label class='control2-label'><input type='radio' name='attr_controller_d8_3' value='two'><span>d8_3:show</span></label>
			<label class='control1-label'><input type='radio' name='attr_controller_d6_1' value='one' checked><span>d6_1:hide</span></label>
            <label class='control2-label'><input type='radio' name='attr_controller_d6_1' value='two'><span>d6_1:show</span></label>
            <label class='control1-label'><input type='radio' name='attr_controller_d6_2' value='one' checked><span>d6_2:hide</span></label>
            <label class='control2-label'><input type='radio' name='attr_controller_d6_2' value='two'><span>d6_2:show</span></label>
			<label class='control1-label'><input type='radio' name='attr_controller_d4_1' value='one' checked><span>d4_1:hide</span></label>
            <label class='control2-label'><input type='radio' name='attr_controller_d4_1' value='two'><span>d4_1:show</span></label>
            <label class='control1-label'><input type='radio' name='attr_controller_d4_2' value='one' checked><span>d4_2:hide</span></label>
            <label class='control2-label'><input type='radio' name='attr_controller_d4_2' value='two'><span>d4_2:show</span></label>
			<label class='control1-label'><input type='radio' name='attr_controller_d4_3' value='one' checked><span>d4_3:hide</span></label>
            <label class='control2-label'><input type='radio' name='attr_controller_d4_3' value='two'><span>d4_3:show</span></label>
        </div> -->
        <Span class="sheet-header1">Dice Pool</Span>
        <div class="sheet-header2">Main dice</div>
        <div class='diceblock'>
            <span class='receiver_d12_1'><img src="http://www.thefirstcity.co.uk/rpg/dice/d12.jpg" alt="d12" width="60" height="60" border="0" align="middle" /></span>
            <span class='receiver_d12_2'><img src="http://www.thefirstcity.co.uk/rpg/dice/d12.jpg" alt="d12" width="60" height="60" border="0" align="middle" /></span>
			<span class='receiver_d10_1'><img src="http://www.thefirstcity.co.uk/rpg/dice/d10.jpg" alt="d10" width="60" height="60" border="0" align="middle" /></span>
			<span class='receiver_d10_2'><img src="http://www.thefirstcity.co.uk/rpg/dice/d10.jpg" alt="d10" width="60" height="60" border="0" align="middle" /></span>
            <span class='receiver_d8_1'><img src="http://www.thefirstcity.co.uk/rpg/dice/d8.jpg" alt="d8" width="60" height="60" border="0" align="middle" /></span>
            <span class='receiver_d8_2'><img src="http://www.thefirstcity.co.uk/rpg/dice/d8.jpg" alt="d8" width="60" height="60" border="0" align="middle" /></span>
            <span class='receiver_d8_3'><img src="http://www.thefirstcity.co.uk/rpg/dice/d8.jpg" alt="d8" width="60" height="60" border="0" align="middle" /></span>
            <span class='receiver_d6_1'><img src="http://www.thefirstcity.co.uk/rpg/dice/d6.jpg" alt="d6" width="60" height="60" border="0" align="middle" /></span>
            <span class='receiver_d6_2'><img src="http://www.thefirstcity.co.uk/rpg/dice/d6.jpg" alt="d6" width="60" height="60" border="0" align="middle" /></span>
            <span class='receiver_d4_1'><img src="http://www.thefirstcity.co.uk/rpg/dice/d4.jpg" alt="d4" width="60" height="60" border="0" align="middle" /></span>
            <span class='receiver_d4_2'><img src="http://www.thefirstcity.co.uk/rpg/dice/d4.jpg" alt="d4" width="60" height="60" border="0" align="middle" /></span>
            <span class='receiver_d4_3'><img src="http://www.thefirstcity.co.uk/rpg/dice/d4.jpg" alt="d4" width="60" height="60" border="0" align="middle" /></span>
        </div>
        <Span class="sheet-header2">Resources dice</Span>
        <div class='diceblock'>
            <span class='resource_d10_1'><img src="http://www.thefirstcity.co.uk/rpg/dice/d10.jpg" alt="d10" width="60" height="60" border="0" align="middle" /></span>
            <span class='resource_d10_2'><img src="http://www.thefirstcity.co.uk/rpg/dice/d10.jpg" alt="d10" width="60" height="60" border="0" align="middle" /></span>
    		<span class='resource_d10_3'><img src="http://www.thefirstcity.co.uk/rpg/dice/d10.jpg" alt="d10" width="60" height="60" border="0" align="middle" /></span>
    		<span class='resource_d10_4'><img src="http://www.thefirstcity.co.uk/rpg/dice/d10.jpg" alt="d10" width="60" height="60" border="0" align="middle" /></span>
    		<span class='resource_d10_5'><img src="http://www.thefirstcity.co.uk/rpg/dice/d10.jpg" alt="d10" width="60" height="60" border="0" align="middle" /></span>
    		<span class='resource_d10_6'><img src="http://www.thefirstcity.co.uk/rpg/dice/d10.jpg" alt="d10" width="60" height="60" border="0" align="middle" /></span>
            <span class='resource_d8_1'><img src="http://www.thefirstcity.co.uk/rpg/dice/d8.jpg" alt="d8" width="60" height="60" border="0" align="middle" /></span>
            <span class='resource_d8_2'><img src="http://www.thefirstcity.co.uk/rpg/dice/d8.jpg" alt="d8" width="60" height="60" border="0" align="middle" /></span>
            <span class='resource_d8_3'><img src="http://www.thefirstcity.co.uk/rpg/dice/d8.jpg" alt="d8" width="60" height="60" border="0" align="middle" /></span>
            <span class='resource_d8_4'><img src="http://www.thefirstcity.co.uk/rpg/dice/d8.jpg" alt="d8" width="60" height="60" border="0" align="middle" /></span>
            <span class='resource_d8_5'><img src="http://www.thefirstcity.co.uk/rpg/dice/d8.jpg" alt="d8" width="60" height="60" border="0" align="middle" /></span>
            <span class='resource_d8_6'><img src="http://www.thefirstcity.co.uk/rpg/dice/d8.jpg" alt="d8" width="60" height="60" border="0" align="middle" /></span>
            <span class='resource_d6_1'><img src="http://www.thefirstcity.co.uk/rpg/dice/d6.jpg" alt="d6" width="60" height="60" border="0" align="middle" /></span>
            <span class='resource_d6_2'><img src="http://www.thefirstcity.co.uk/rpg/dice/d6.jpg" alt="d6" width="60" height="60" border="0" align="middle" /></span>
            <span class='resource_d6_3'><img src="http://www.thefirstcity.co.uk/rpg/dice/d6.jpg" alt="d6" width="60" height="60" border="0" align="middle" /></span>
            <span class='resource_d6_4'><img src="http://www.thefirstcity.co.uk/rpg/dice/d6.jpg" alt="d6" width="60" height="60" border="0" align="middle" /></span>
            <span class='resource_d6_5'><img src="http://www.thefirstcity.co.uk/rpg/dice/d6.jpg" alt="d6" width="60" height="60" border="0" align="middle" /></span>
            <span class='resource_d6_6'><img src="http://www.thefirstcity.co.uk/rpg/dice/d6.jpg" alt="d6" width="60" height="60" border="0" align="middle" /></span>
        </div>
    </div>
    <div class ="sheet-item-plot">
        
    </div>
    <div class ="sheet-item-roll">
            <input name='attr_main_dice' type='text' value='{}'>
            <input name='attr_main_diceroll' type='text' value='{"d4":0,"d6":0,"d8":0,"d10":0,"d12":0}'>
            <input name='attr_resources_dice' type='text' value='{}'>
            <input name='attr_resources_diceroll' type='text' value='{"d4":0,"d6":0,"d8":0,"d10":0,"d12":0}'>
            <input name='attr_plot_points' type='text' value=0>
            <button class ="roll_button" type="button">Roll</button>
    </div>
    <div class ="sheet-item-affiliations_title sheet-rotated">Affiliations</div>
    <div class ="sheet-griditem sheet-item-affiliations_body">
        <ul>
			<li>
				<label class="sheet-dicepicker"><input type="radio" name="attr_affiliation" value="solo">Solo</label>
				<div class="sheet-styled-select">
					<ul>
						<li><label><input type="radio" name="attr_solo" value="d4"><img src="http://www.thefirstcity.co.uk/rpg/dice/d4.jpg" alt="d4" width="32" height="32" border="0" align="middle" /></label></li>
						<li><label><input type="radio" name="attr_solo" value="d6"><img src="http://www.thefirstcity.co.uk/rpg/dice/d6.jpg" alt="d6" width="32" height="32" border="0" align="middle" /></label></li>
						<li><label><input type="radio" name="attr_solo" value="d8"><img src="http://www.thefirstcity.co.uk/rpg/dice/d8.jpg" alt="d8" width="32" height="32" border="0" align="middle" /></label></li>
						<li><label><input type="radio" name="attr_solo" value="d10"><img src="http://www.thefirstcity.co.uk/rpg/dice/d10.jpg" alt="d10" width="32" height="32" border="0" align="middle" /></label></li>
						<li><label><input type="radio" name="attr_solo" value="d12"><img src="http://www.thefirstcity.co.uk/rpg/dice/d12.jpg" alt="d12" width="32" height="32" border="0" align="middle" /></label></li>
					</ul>
				</div>
			</li>
			<li>
				<label class="sheet-dicepicker"><input type="radio" name="attr_affiliation" value="partner">Partner</label>
				<div class="sheet-styled-select">
					<ul>
						<li><label><input type="radio" name="attr_partner" value="d4"><img src="http://www.thefirstcity.co.uk/rpg/dice/d4.jpg" alt="d4" width="32" height="32" border="0" align="middle" /></label></li>
						<li><label><input type="radio" name="attr_partner" value="d6"><img src="http://www.thefirstcity.co.uk/rpg/dice/d6.jpg" alt="d6" width="32" height="32" border="0" align="middle" /></label></li>
						<li><label><input type="radio" name="attr_partner" value="d8"><img src="http://www.thefirstcity.co.uk/rpg/dice/d8.jpg" alt="d8" width="32" height="32" border="0" align="middle" /></label></li>
						<li><label><input type="radio" name="attr_partner" value="d10"><img src="http://www.thefirstcity.co.uk/rpg/dice/d10.jpg" alt="d10" width="32" height="32" border="0" align="middle" /></label></li>
						<li><label><input type="radio" name="attr_partner" value="d12"><img src="http://www.thefirstcity.co.uk/rpg/dice/d12.jpg" alt="d12" width="32" height="32" border="0" align="middle" /></label></li>
					</ul>
				</div>
			</li>
			<li>
				<label class="sheet-dicepicker"><input type="radio" name="attr_affiliation" value="squad">Squad</label>
				<div class="sheet-styled-select">
					<ul>
						<li><label><input type="radio" name="attr_squad" value="d4"><img src="http://www.thefirstcity.co.uk/rpg/dice/d4.jpg" alt="d4" width="32" height="32" border="0" align="middle" /></label></li>
						<li><label><input type="radio" name="attr_squad" value="d6"><img src="http://www.thefirstcity.co.uk/rpg/dice/d6.jpg" alt="d6" width="32" height="32" border="0" align="middle" /></label></li>
						<li><label><input type="radio" name="attr_squad" value="d8"><img src="http://www.thefirstcity.co.uk/rpg/dice/d8.jpg" alt="d8" width="32" height="32" border="0" align="middle" /></label></li>
						<li><label><input type="radio" name="attr_squad" value="d10"><img src="http://www.thefirstcity.co.uk/rpg/dice/d10.jpg" alt="d10" width="32" height="32" border="0" align="middle" /></label></li>
						<li><label><input type="radio" name="attr_squad" value="d12"><img src="http://www.thefirstcity.co.uk/rpg/dice/d12.jpg" alt="d12" width="32" height="32" border="0" align="middle" /></label></li>
					</ul>
				</div>
			</li>
        </ul> 
    </div>
    <div class ="sheet-item-distinctions_title sheet-rotated">Distinctions</div>
    <div class ="sheet-griditem sheet-item-distinctions_body">
        <ul>
			<li>
				<label class="sheet-dicepicker"><input type="radio" name="attr_distinction" value="dist1"><input type="text" name="attr_distinction1"/></label>
				<div class="sheet-styled-select">
					<ul>
						<li><label><input type="radio" name="attr_dist1" value="d8"><img src="http://www.thefirstcity.co.uk/rpg/dice/d8.jpg" alt="d8" width="32" height="32" border="0" align="middle" /></label></li>
						<li><label><input type="radio" name="attr_dist1" value="d4"><img src="http://www.thefirstcity.co.uk/rpg/dice/d4.jpg" alt="d4" width="32" height="32" border="0" align="middle" /></label></li>
					</ul>
				</div>
			</li>
			<li>
				<label class="sheet-dicepicker"><input type="radio" name="attr_distinction" value="dist2"><input type="text" name="attr_distinction2"/></label>
				<div class="sheet-styled-select">
					<ul>
						<li><label><input type="radio" name="attr_dist2" value="d8"><img src="http://www.thefirstcity.co.uk/rpg/dice/d8.jpg" alt="d8" width="32" height="32" border="0" align="middle" /></label></li>
						<li><label><input type="radio" name="attr_dist2" value="d4"><img src="http://www.thefirstcity.co.uk/rpg/dice/d4.jpg" alt="d4" width="32" height="32" border="0" align="middle" /></label></li>
					</ul>
				</div>
			</li>
			<li>
				<label class="sheet-dicepicker"><input type="radio" name="attr_distinction" value="dist3"><input type="text" name="attr_distinction3"/></label>
				<div class="sheet-styled-select">
					<ul>
						<li><label><input type="radio" name="attr_dist3" value="d8"><img src="http://www.thefirstcity.co.uk/rpg/dice/d8.jpg" alt="d8" width="32" height="32" border="0" align="middle" /></label></li>
						<li><label><input type="radio" name="attr_dist3" value="d4"><img src="http://www.thefirstcity.co.uk/rpg/dice/d4.jpg" alt="d4" width="32" height="32" border="0" align="middle" /></label></li>
					</ul>
				</div>
			</li>
			    <label class="sheet-dicepicker"><input type="radio" name="attr_distinction" value="dist4">No distinction used</label>
			    <input name='attr_dist4' type='text' value='0'>
			<li>
			    
			</li>
		</ul>
    </div>
    <div class ="sheet-item-roles_title sheet-rotated">Roles</div>
    <div class ="sheet-griditem sheet-item-roles_body">
        <ul>
			<li>
				<label class="sheet-dicepicker"><input type="radio" name="attr_role" value="forensics">Forensics</label>
				<div class="sheet-styled-select">
					<ul>
						<li><label><input type="radio" name="attr_forensics" value="d4"><img src="http://www.thefirstcity.co.uk/rpg/dice/d4.jpg" alt="d4" width="32" height="32" border="0" align="middle" /></label></li>
						<li><label><input type="radio" name="attr_forensics" value="d6"><img src="http://www.thefirstcity.co.uk/rpg/dice/d6.jpg" alt="d6" width="32" height="32" border="0" align="middle" /></label></li>
						<li><label><input type="radio" name="attr_forensics" value="d8"><img src="http://www.thefirstcity.co.uk/rpg/dice/d8.jpg" alt="d8" width="32" height="32" border="0" align="middle" /></label></li>
						<li><label><input type="radio" name="attr_forensics" value="d10"><img src="http://www.thefirstcity.co.uk/rpg/dice/d10.jpg" alt="d10" width="32" height="32" border="0" align="middle" /></label></li>
						<li><label><input type="radio" name="attr_forensics" value="d12"><img src="http://www.thefirstcity.co.uk/rpg/dice/d12.jpg" alt="d12" width="32" height="32" border="0" align="middle" /></label></li>
					</ul>
				</div>
			</li>
			<li>
				<label class="sheet-dicepicker"><input type="radio" name="attr_role" value="investigation">Investigation</label>
				<div class="sheet-styled-select">
					<ul>
						<li><label><input type="radio" name="attr_investigation" value="d4"><img src="http://www.thefirstcity.co.uk/rpg/dice/d4.jpg" alt="d4" width="32" height="32" border="0" align="middle" /></label></li>
						<li><label><input type="radio" name="attr_investigation" value="d6"><img src="http://www.thefirstcity.co.uk/rpg/dice/d6.jpg" alt="d6" width="32" height="32" border="0" align="middle" /></label></li>
						<li><label><input type="radio" name="attr_investigation" value="d8"><img src="http://www.thefirstcity.co.uk/rpg/dice/d8.jpg" alt="d8" width="32" height="32" border="0" align="middle" /></label></li>
						<li><label><input type="radio" name="attr_investigation" value="d10"><img src="http://www.thefirstcity.co.uk/rpg/dice/d10.jpg" alt="d10" width="32" height="32" border="0" align="middle" /></label></li>
						<li><label><input type="radio" name="attr_investigation" value="d12"><img src="http://www.thefirstcity.co.uk/rpg/dice/d12.jpg" alt="d12" width="32" height="32" border="0" align="middle" /></label></li>
					</ul>
				</div>
			</li>
			<li>
				<label class="sheet-dicepicker"><input type="radio" name="attr_role" value="legal">Legal</label>
				<div class="sheet-styled-select">
					<ul>
						<li><label><input type="radio" name="attr_legal" value="d4"><img src="http://www.thefirstcity.co.uk/rpg/dice/d4.jpg" alt="d4" width="32" height="32" border="0" align="middle" /></label></li>
						<li><label><input type="radio" name="attr_legal" value="d6"><img src="http://www.thefirstcity.co.uk/rpg/dice/d6.jpg" alt="d6" width="32" height="32" border="0" align="middle" /></label></li>
						<li><label><input type="radio" name="attr_legal" value="d8"><img src="http://www.thefirstcity.co.uk/rpg/dice/d8.jpg" alt="d8" width="32" height="32" border="0" align="middle" /></label></li>
						<li><label><input type="radio" name="attr_legal" value="d10"><img src="http://www.thefirstcity.co.uk/rpg/dice/d10.jpg" alt="d10" width="32" height="32" border="0" align="middle" /></label></li>
						<li><label><input type="radio" name="attr_legal" value="d12"><img src="http://www.thefirstcity.co.uk/rpg/dice/d12.jpg" alt="d12" width="32" height="32" border="0" align="middle" /></label></li>
					</ul>
				</div>
			</li>
			<li>
				<label class="sheet-dicepicker"><input type="radio" name="attr_role" value="medicine">Medicine</label>
				<div class="sheet-styled-select">
					<ul>
						<li><label><input type="radio" name="attr_medicine" value="d4"><img src="http://www.thefirstcity.co.uk/rpg/dice/d4.jpg" alt="d4" width="32" height="32" border="0" align="middle" /></label></li>
						<li><label><input type="radio" name="attr_medicine" value="d6"><img src="http://www.thefirstcity.co.uk/rpg/dice/d6.jpg" alt="d6" width="32" height="32" border="0" align="middle" /></label></li>
						<li><label><input type="radio" name="attr_medicine" value="d8"><img src="http://www.thefirstcity.co.uk/rpg/dice/d8.jpg" alt="d8" width="32" height="32" border="0" align="middle" /></label></li>
						<li><label><input type="radio" name="attr_medicine" value="d10"><img src="http://www.thefirstcity.co.uk/rpg/dice/d10.jpg" alt="d10" width="32" height="32" border="0" align="middle" /></label></li>
						<li><label><input type="radio" name="attr_medicine" value="d12"><img src="http://www.thefirstcity.co.uk/rpg/dice/d12.jpg" alt="d12" width="32" height="32" border="0" align="middle" /></label></li>
					</ul>
				</div>
			</li>
			<li>
				<label class="sheet-dicepicker"><input type="radio" name="attr_role" value="psychology">Psychology</label>
				<div class="sheet-styled-select">
					<ul>
						<li><label><input type="radio" name="attr_psychology" value="d4"><img src="http://www.thefirstcity.co.uk/rpg/dice/d4.jpg" alt="d4" width="32" height="32" border="0" align="middle" /></label></li>
						<li><label><input type="radio" name="attr_psychology" value="d6"><img src="http://www.thefirstcity.co.uk/rpg/dice/d6.jpg" alt="d6" width="32" height="32" border="0" align="middle" /></label></li>
						<li><label><input type="radio" name="attr_psychology" value="d8"><img src="http://www.thefirstcity.co.uk/rpg/dice/d8.jpg" alt="d8" width="32" height="32" border="0" align="middle" /></label></li>
						<li><label><input type="radio" name="attr_psychology" value="d10"><img src="http://www.thefirstcity.co.uk/rpg/dice/d10.jpg" alt="d10" width="32" height="32" border="0" align="middle" /></label></li>
						<li><label><input type="radio" name="attr_psychology" value="d12"><img src="http://www.thefirstcity.co.uk/rpg/dice/d12.jpg" alt="d12" width="32" height="32" border="0" align="middle" /></label></li>
					</ul>
				</div>
			</li>
			<li>
				<label class="sheet-dicepicker"><input type="radio" name="attr_role" value="tactics">Tactics</label>
				<div class="sheet-styled-select">
					<ul>
						<li><label><input type="radio" name="attr_tactics" value="d4"><img src="http://www.thefirstcity.co.uk/rpg/dice/d4.jpg" alt="d4" width="32" height="32" border="0" align="middle" /></label></li>
						<li><label><input type="radio" name="attr_tactics" value="d6"><img src="http://www.thefirstcity.co.uk/rpg/dice/d6.jpg" alt="d6" width="32" height="32" border="0" align="middle" /></label></li>
						<li><label><input type="radio" name="attr_tactics" value="d8"><img src="http://www.thefirstcity.co.uk/rpg/dice/d8.jpg" alt="d8" width="32" height="32" border="0" align="middle" /></label></li>
						<li><label><input type="radio" name="attr_tactics" value="d10"><img src="http://www.thefirstcity.co.uk/rpg/dice/d10.jpg" alt="d10" width="32" height="32" border="0" align="middle" /></label></li>
						<li><label><input type="radio" name="attr_tactics" value="d12"><img src="http://www.thefirstcity.co.uk/rpg/dice/d12.jpg" alt="d12" width="32" height="32" border="0" align="middle" /></label></li>
					</ul>
				</div>
			</li>
			<li>
				<label class="sheet-dicepicker"><input type="radio" name="attr_role" value="technology">Technology</label>
				<div class="sheet-styled-select">
					<ul>
						<li><label><input type="radio" name="attr_technology" value="d4"><img src="http://www.thefirstcity.co.uk/rpg/dice/d4.jpg" alt="d4" width="32" height="32" border="0" align="middle" /></label></li>
						<li><label><input type="radio" name="attr_technology" value="d6"><img src="http://www.thefirstcity.co.uk/rpg/dice/d6.jpg" alt="d6" width="32" height="32" border="0" align="middle" /></label></li>
						<li><label><input type="radio" name="attr_technology" value="d8"><img src="http://www.thefirstcity.co.uk/rpg/dice/d8.jpg" alt="d8" width="32" height="32" border="0" align="middle" /></label></li>
						<li><label><input type="radio" name="attr_technology" value="d10"><img src="http://www.thefirstcity.co.uk/rpg/dice/d10.jpg" alt="d10" width="32" height="32" border="0" align="middle" /></label></li>
						<li><label><input type="radio" name="attr_technology" value="d12"><img src="http://www.thefirstcity.co.uk/rpg/dice/d12.jpg" alt="d12" width="32" height="32" border="0" align="middle" /></label></li>
					</ul>
				</div>
			</li>
        </ul> 
    </div>
    <div class ="sheet-item-talents_title sheet-rotated">Talents</div>
    <div class ="sheet-griditem sheet-item-talents_body">
        <ul>
            <li><label class="sheet-dicepicker"><input type="text" name="attr_talent1"/></label></li>
            <li><label class="sheet-dicepicker"><input type="text" name="attr_talent2"/></label></li>
            <li><label class="sheet-dicepicker"><input type="text" name="attr_talent3"/></label></li>
        </ul>
    </div>
    <div class ="sheet-item-resources_title sheet-rotated">Resources</div>
    <div class ="sheet-griditem sheet-item-resources_body">
        <ul>
			<li>
				<label class="sheet-dicepicker"><input type="text" name="attr_resource11"/></label>
				<div class="sheet-styled-select2">
					<ul>
						<li><label><input type="checkbox" name="attr_res1a" value="d10"><img src="http://www.thefirstcity.co.uk/rpg/dice/d10.jpg" alt="d10" width="32" height="32" border="0" align="middle" /></label></li>
						<li><label><input type="checkbox" name="attr_res1b" value="d10"><img src="http://www.thefirstcity.co.uk/rpg/dice/d10.jpg" alt="d10" width="32" height="32" border="0" align="middle" /></label></li>
					</ul>
				</div>
			</li>
			<li>
				<label class="sheet-dicepicker"><input type="text" name="attr_resource2"/></label>
				<div class="sheet-styled-select2">
					<ul>
						<li><label><input type="checkbox" name="attr_res2a" value="d8"><img src="http://www.thefirstcity.co.uk/rpg/dice/d8.jpg" alt="d8" width="32" height="32" border="0" align="middle" /></label></li>
						<li><label><input type="checkbox" name="attr_res2b" value="d8"><img src="http://www.thefirstcity.co.uk/rpg/dice/d8.jpg" alt="d8" width="32" height="32" border="0" align="middle" /></label></li>
					</ul>
				</div>
			</li>
			<li>
				<label class="sheet-dicepicker"><input type="text" name="attr_resource3"/></label>
				<div class="sheet-styled-select2">
					<ul>
						<li><label><input type="checkbox" name="attr_res3a" value="d6"><img src="http://www.thefirstcity.co.uk/rpg/dice/d6.jpg" alt="d6" width="32" height="32" border="0" align="middle" /></label></li>
						<li><label><input type="checkbox" name="attr_res3b" value="d6"><img src="http://www.thefirstcity.co.uk/rpg/dice/d6.jpg" alt="d6" width="32" height="32" border="0" align="middle" /></label></li>
					</ul>
				</div>
			</li>
			<li>
				<label class="sheet-dicepicker"><input type="text" name="attr_resource4"/></label>
				<div class="sheet-styled-select2">
					<ul>
						<li><label><input type="checkbox" name="attr_res4a" value="d6"><img src="http://www.thefirstcity.co.uk/rpg/dice/d6.jpg" alt="d6" width="32" height="32" border="0" align="middle" /></label></li>
						<li><label><input type="checkbox" name="attr_res4b" value="d6"><img src="http://www.thefirstcity.co.uk/rpg/dice/d6.jpg" alt="d6" width="32" height="32" border="0" align="middle" /></label></li>
					</ul>
				</div>
			</li>
		</ul>
    </div>
    <div class ="sheet-item-stress_title sheet-rotated">Stress</div>
    <div class ="sheet-griditem sheet-item-stress_body">
        <ul>
			<li>
				<label class="sheet-dicepicker"><input type="radio" name="attr_stress" value="afraid">Afraid</label>
				<div class="sheet-styled-select">
					<ul>
						<li><label><input type="radio" name="attr_afraid" value="d4"><img src="http://www.thefirstcity.co.uk/rpg/dice/d4.jpg" alt="d4" width="32" height="32" border="0" align="middle" /></label></li>
						<li><label><input type="radio" name="attr_afraid" value="d6"><img src="http://www.thefirstcity.co.uk/rpg/dice/d6.jpg" alt="d6" width="32" height="32" border="0" align="middle" /></label></li>
						<li><label><input type="radio" name="attr_afraid" value="d8"><img src="http://www.thefirstcity.co.uk/rpg/dice/d8.jpg" alt="d8" width="32" height="32" border="0" align="middle" /></label></li>
						<li><label><input type="radio" name="attr_afraid" value="d10"><img src="http://www.thefirstcity.co.uk/rpg/dice/d10.jpg" alt="d10" width="32" height="32" border="0" align="middle" /></label></li>
						<li><label><input type="radio" name="attr_afraid" value="d12"><img src="http://www.thefirstcity.co.uk/rpg/dice/d12.jpg" alt="d12" width="32" height="32" border="0" align="middle" /></label></li>
					</ul>
				</div>
			</li>
			<li>
				<label class="sheet-dicepicker"><input type="radio" name="attr_stress" value="angry">Angry</label>
				<div class="sheet-styled-select">
					<ul>
						<li><label><input type="radio" name="attr_angry" value="d4"><img src="http://www.thefirstcity.co.uk/rpg/dice/d4.jpg" alt="d4" width="32" height="32" border="0" align="middle" /></label></li>
						<li><label><input type="radio" name="attr_angry" value="d6"><img src="http://www.thefirstcity.co.uk/rpg/dice/d6.jpg" alt="d6" width="32" height="32" border="0" align="middle" /></label></li>
						<li><label><input type="radio" name="attr_angry" value="d8"><img src="http://www.thefirstcity.co.uk/rpg/dice/d8.jpg" alt="d8" width="32" height="32" border="0" align="middle" /></label></li>
						<li><label><input type="radio" name="attr_angry" value="d10"><img src="http://www.thefirstcity.co.uk/rpg/dice/d10.jpg" alt="d10" width="32" height="32" border="0" align="middle" /></label></li>
						<li><label><input type="radio" name="attr_angry" value="d12"><img src="http://www.thefirstcity.co.uk/rpg/dice/d12.jpg" alt="d12" width="32" height="32" border="0" align="middle" /></label></li>
					</ul>
				</div>
			</li>
			<li>
				<label class="sheet-dicepicker"><input type="radio" name="attr_stress" value="anxious">Anxious</label>
				<div class="sheet-styled-select">
					<ul>
						<li><label><input type="radio" name="attr_anxious" value="d4"><img src="http://www.thefirstcity.co.uk/rpg/dice/d4.jpg" alt="d4" width="32" height="32" border="0" align="middle" /></label></li>
						<li><label><input type="radio" name="attr_anxious" value="d6"><img src="http://www.thefirstcity.co.uk/rpg/dice/d6.jpg" alt="d6" width="32" height="32" border="0" align="middle" /></label></li>
						<li><label><input type="radio" name="attr_anxious" value="d8"><img src="http://www.thefirstcity.co.uk/rpg/dice/d8.jpg" alt="d8" width="32" height="32" border="0" align="middle" /></label></li>
						<li><label><input type="radio" name="attr_anxious" value="d10"><img src="http://www.thefirstcity.co.uk/rpg/dice/d10.jpg" alt="d10" width="32" height="32" border="0" align="middle" /></label></li>
						<li><label><input type="radio" name="attr_anxious" value="d12"><img src="http://www.thefirstcity.co.uk/rpg/dice/d12.jpg" alt="d12" width="32" height="32" border="0" align="middle" /></label></li>
					</ul>
				</div>
			</li>
			<li>
				<label class="sheet-dicepicker"><input type="radio" name="attr_stress" value="exhausted">Exhausted</label>
				<div class="sheet-styled-select">
					<ul>
						<li><label><input type="radio" name="attr_exhausted" value="d4"><img src="http://www.thefirstcity.co.uk/rpg/dice/d4.jpg" alt="d4" width="32" height="32" border="0" align="middle" /></label></li>
						<li><label><input type="radio" name="attr_exhausted" value="d6"><img src="http://www.thefirstcity.co.uk/rpg/dice/d6.jpg" alt="d6" width="32" height="32" border="0" align="middle" /></label></li>
						<li><label><input type="radio" name="attr_exhausted" value="d8"><img src="http://www.thefirstcity.co.uk/rpg/dice/d8.jpg" alt="d8" width="32" height="32" border="0" align="middle" /></label></li>
						<li><label><input type="radio" name="attr_exhausted" value="d10"><img src="http://www.thefirstcity.co.uk/rpg/dice/d10.jpg" alt="d10" width="32" height="32" border="0" align="middle" /></label></li>
						<li><label><input type="radio" name="attr_exhausted" value="d12"><img src="http://www.thefirstcity.co.uk/rpg/dice/d12.jpg" alt="d12" width="32" height="32" border="0" align="middle" /></label></li>
					</ul>
				</div>
			</li>
			<li>
				<label class="sheet-dicepicker"><input type="radio" name="attr_stress" value="injured">Injured</label>
				<div class="sheet-styled-select">
					<ul>
						<li><label><input type="radio" name="attr_injured" value="d4"><img src="http://www.thefirstcity.co.uk/rpg/dice/d4.jpg" alt="d4" width="32" height="32" border="0" align="middle" /></label></li>
						<li><label><input type="radio" name="attr_injured" value="d6"><img src="http://www.thefirstcity.co.uk/rpg/dice/d6.jpg" alt="d6" width="32" height="32" border="0" align="middle" /></label></li>
						<li><label><input type="radio" name="attr_injured" value="d8"><img src="http://www.thefirstcity.co.uk/rpg/dice/d8.jpg" alt="d8" width="32" height="32" border="0" align="middle" /></label></li>
						<li><label><input type="radio" name="attr_injured" value="d10"><img src="http://www.thefirstcity.co.uk/rpg/dice/d10.jpg" alt="d10" width="32" height="32" border="0" align="middle" /></label></li>
						<li><label><input type="radio" name="attr_injured" value="d12"><img src="http://www.thefirstcity.co.uk/rpg/dice/d12.jpg" alt="d12" width="32" height="32" border="0" align="middle" /></label></li>
					</ul>
				</div>
			</li>
		</ul>     
    </div>
    <div class ="sheet-item-h">Notes
        <!--<input name='attr_affiliation_die' type='text' value='0'>
        <input name='attr_distinction_die' type='text' value='0'>
        <input name='attr_role_die' type='text' value='0'>
        <input name='attr_stress_die' readonly type='text' value='0'>
        <input name='attr_affiliation' type='text' value='a'>
        <input name='attr_distinction' type='text' value='a'>
        <input name='attr_role' type='text' value='a'>
        <input name='attr_res1a' type='text' value='a'>
        <input name='attr_stress' type='text' value='a'>-->
        
    </div>
</div>

<script type='text/worker'>
    on('change:affiliation change:distinction change:role change:stress' ,(event)=>{
        //onsole.log(`============================ mainpool setting detected ============================`);
        //nsole.log(event);
        //nsole.log(`========================================================`);
        let params = {}
	    params['calling_attribute'] = event.sourceAttribute;
	    params['action'] = "add";
        getAttrs(['main_dice','main_diceroll',event.newValue], function (values) {
            let set_attr_obj = {}
	        //console.log(`============================ raw values ============================`);
	        //console.log(values);
	        //console.log(`====================================================================`);
	        //entries = Object.entries(values);
	        //console.log(`============================ entry array values ============================`);
	        //console.log(entries);
	        //console.log(`====================================================================`);
	        let rr= {};
	        rr[event.newValue] = values[event.newValue];
	        params['calling_attribute_value'] = rr;
	        params['current_dice_pool'] = values['main_dice'];
	        //console.log(`============================ parameter contents ====================`);
            //console.log(params);
            //console.log(`====================================================================`);
            //console.log(`============================ main_dice parameters ============================`);
            //console.log(params);
            //console.log(`========================================================`);
            //console.log(alter_dice_pool(params));
            
            control_settings = {'d4':0,'d6':0,'d8':0,'d10':0,'d12':0};
            
            main_dice_pool = alter_dice_pool(params);
            set_attr_obj['main_dice'] = JSON.stringify(main_dice_pool);
            //console.log(main_dice_pool);
			for (key of Object.keys(main_dice_pool)) {
			    //console.log(main_dice_pool[key]);
			    for (dice_size of Object.values(main_dice_pool[key])) {
			        //console.log(dice_size);
			        if (dice_size in control_settings) {
			           control_settings[dice_size] = control_settings[dice_size] +1;
			        }
			    }
			}
			max_old_settings = Object.values(JSON.parse(values['main_diceroll'])).reduce(function(a, b) {return Math.max(a, b);});
			max_new_settings = Object.values(control_settings).reduce(function(a, b) {return Math.max(a, b);});
			//console.log(control_settings);
			//setAttrs('diceroll':JSON.stringify(control_settings));
			console.log(JSON.parse(values['main_diceroll']));
			console.log(control_settings);
			//console.log(JSON.stringify(control_settings));
			console.log(max_old_settings);
			console.log(max_new_settings);
			set_attr_obj['main_diceroll'] = JSON.stringify(control_settings);
			
			for (entry of Object.entries(control_settings)) {
			    for (i=1; i<4; i++) {
			        if (i <= entry[1]) {
			            //console.log("_" + entry[0] +"_" + i + " :two");
			            set_attr_obj["controller_" + entry[0] +"_" + i] = "two";
			        } else {
			            //console.log("_" + entry[0] +"_" + i + " :one");
			            set_attr_obj["controller_" + entry[0] +"_" + i] = "one";
			        }
			    }
			}
			//console.log(set_attr_obj);
			console.log(set_attr_obj);
			setAttrs(set_attr_obj);
        });
    });
    
    
    function alter_dice_pool(params) {
        var dice_pool = JSON.parse(params['current_dice_pool']);
        if (params['action']==='delete') {
            delete dice_pool[params['calling_attribute']];  
        }
        if (params['action']==='add') {
            dice_pool[params['calling_attribute']] = params['calling_attribute_value'];  
        }
        return dice_pool;
    }

</script>